// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  engineType = "library"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id         String      @id @default(cuid())
  firebase_uid    String      @unique
  username        String?     @unique
  email           String      @unique
  first_name      String
  last_name       String
  status          UserStatus
  role            UserRole

  avatar_key       String?

  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt

}

enum UserRole {
  USER
  ADMIN
}

enum UserStatus {
  ACTIVE
  INACTIVE
}

model Show {
  show_id          String      @id @default(cuid())
  show_name        String      @unique
  show_description String
  venue            String      
  address          String
  show_status      ShowStatus
  show_start_date  DateTime
  show_end_date    DateTime
  show_image_key   String?

  scheds           Sched[]

  createdAt        DateTime    @default(now())
  updatedAt        DateTime    @updatedAt
}

enum ShowStatus {
  UPCOMING
  DRAFT
  OPEN
  CLOSED
  ON_GOING
  CANCELLED
  POSTPONED
}

model Sched {
  sched_id          String      @id @default(cuid())
  sched_start_time  DateTime
  sched_end_time    DateTime

  show_id           String
  show              Show        @relation(fields: [show_id], references: [show_id])

  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
}